<h1 class="error" ng-hide="dbready || dbgrace">Henter data<br>vær tålmodig</h1>
<h2>Send en besked</h2>
<ng-form name="messageform">
  <select class="forumselect" name="forum" id="forum" ng-model="message.forum" ng-options="forum.forum for forum in fora" required>
    <option value="" disabled selected="selected">vælg forum</option>
  </select>
  <br>
  <input class="forumselect" type="text" placeholder="emne" id="messagesubject" ng-model="message.subject" required>
  <br>
<textarea class="forumselect" placeholder="besked" id="message_body" type="text" ng-model="message.body" required></textarea>
<button class="green forumselect" ng-disabled="!messageform.$valid" ng-click="messagesend()">Send besked</button>
</ng-form>


<h2>Mine Beskeder</h2>
<input ng-model="messagefilter" type="text"><i class="fa fa-search"></i>
<div>
  <div class="messagelist">
    <table class="baselayout" width="100%">
      <thead>
        <tr>
          <th>Emne</th>
          <th>Fra</th>
          <th>Forum</th>
          <th>Tid</th>
          <th>Besked</th>
        </tr> 
     </thead>
      <tbody>
        <tr ng-repeat-start="message in messages | filter:messagematch(messagefilter)"
            ng-class="{selected: currentmessage == message}"
            ng-click="setCurrentMessage(message)" class="message" ng-class-even="'even'" ng-class-odd="'odd'" >          
          <td>
            <a href="{{burl}}/#!timeline?event=6">
            <i class="fa fa-link" ng-show="message.type=='event'"></i>
            {{message.subject}}
            </a>
          </td>
          <td>{{message.sender}}</td>
          <td>{{message.source}}</td>
          <td>{{message.created |date:"d. MMM yyyy"}}</td>
          <td>{{message.body |limitTo :20}}...</td>
          <td><i ng-click="messagedelete(message)" confirm="Vil du slette beskeden?" class="fa fa-trash"></i></td>
        </tr>
        <tr ng-repeat-end ng-if="currentmessage == message">
          <td class="popempty"></td><td class="popdown" colspan="4"> <pre class="popdown" ng-bind=message.body></pre> </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
  
